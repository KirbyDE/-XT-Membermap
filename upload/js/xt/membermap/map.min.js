!function(t,o,n,e){"use strict";XF.xtMembermap=XF.Event.newHandler({eventNameSpace:"xtMembermap",options:{container:null,mapurl:null,maptype:null,latitude:null,longitude:null,zoom:null,poi:1,cluster:1},load:null,container:null,dimensions:null,markers:null,mapData:null,markerClusterer:null,map:null,bounds:null,infoWindow:null,init:function(){!0!==this.load&&(this.load=!0,this.bounds=new google.maps.LatLngBounds,this.infoWindow=new google.maps.InfoWindow({maxWidth:450}),this.xhr=XF.ajax("post",this.options.mapurl,{},XF.proxy(this,"onLoad")))},onLoad:function(t){t.mapData&&(this.mapData=t.mapData,this.initMap())},addMarker:function(t){var o=new google.maps.Marker({position:t.coords,map:this.map,title:t.title,icon:t.iconUrl});if(this.options.cluster)new MarkerClusterer(this.map,this.marker,{averageCenter:!0,imagePath:t.clusterPath+"/m"});if(t.coords)var n=new google.maps.LatLng(t.coords);else n=new google.maps.LatLng(this.options.latitude,this.options.longitude);this.bounds.extend(n);var e=this;!function(t,o){google.maps.event.addListener(t,"click",function(n){e.map.panTo(t.getPosition()),e.infoWindow.setContent(o.content),e.infoWindow.open(e.map,t)})}(o,t)},initMap:function(){var o={zoom:this.options.zoom,center:{lat:this.options.latitude,lng:this.options.longitude},mapTypeId:this.options.maptype,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:["roadmap","terrain","hybrid","satellite"]}};this.map=new google.maps.Map(n.getElementById("membermap"),o);var e=this;if(!this.options.poi){this.map.setOptions({styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]})}if(t.each(this.mapData,function(){e.addMarker(this)}),this.bounds.getNorthEast().equals(this.bounds.getSouthWest())){var i=new google.maps.LatLng(this.bounds.getNorthEast().lat()+.01,this.bounds.getNorthEast().lng()+.01),a=new google.maps.LatLng(this.bounds.getNorthEast().lat()-.01,this.bounds.getNorthEast().lng()-.01);this.bounds.extend(i),this.bounds.extend(a)}}}),XF.Element.register("xtMembermap","XF.xtMembermap")}(jQuery,window,document);
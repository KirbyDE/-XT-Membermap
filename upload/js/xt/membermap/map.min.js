!function(g,m,h,n){XF.xtMembermap=XF.Event.newHandler({eventNameSpace:"xtMembermap",options:{container:null,mapurl:null,maptype:null,mapid:null,latitude:null,longitude:null,center:"default",zoom:null,poi:1,cluster:1,clusterPath:null,maxZoom:null,minClusterSize:null},load:null,container:null,dimensions:null,markers:null,mapData:null,markerCluster:null,map:null,bounds:null,infoWindow:null,userDataUrl:null,init:function(){!0!==this.load&&(this.load=!0,this.bounds=new google.maps.LatLngBounds,this.infoWindow=
new google.maps.InfoWindow({maxWidth:450}),this.xhr=XF.ajax("post",this.options.mapurl,{},XF.proxy(this,"onLoad")));this.markers=[]},onLoad:function(a){a.mapData&&(this.mapData=a.mapData,this.initMap())},addMarker:function(a,b){var c=new google.maps.Marker({position:a.coords,map:this.map,title:a.title,icon:a.iconUrl}),e=a.coords?new google.maps.LatLng(a.coords):new google.maps.LatLng(this.options.latitude,this.options.longitude);this.bounds.extend(e);var d=this;(function(f,k){google.maps.event.addListener(f,
"click",function(p){XF.ajax("post",k.infoUrl,{},function(l){d.map.panTo(f.getPosition());d.infoWindow.setContent(l.html.content);d.infoWindow.open(d.map,f)})})})(c,a);this.markers.push(c)},initMap:function(){var a={zoom:this.options.zoom,center:{lat:this.options.latitude,lng:this.options.longitude},mapId:this.options.mapid,mapTypeId:this.options.maptype,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:["roadmap","terrain","hybrid","satellite"]}};
this.map=new google.maps.Map(h.getElementById("membermap"),a);var b=this;this.options.poi||this.map.setOptions({styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]});g.each(this.mapData,function(e){b.addMarker(this,e)});this.options.cluster&&(this.markerCluster=new MarkerClusterer(this.map,this.markers,{averageCenter:!0,maxZoom:b.options.maxZoom,minimumClusterSize:b.options.minClusterSize,imagePath:b.options.clusterPath+"/m"}));this.oms=new OverlappingMarkerSpiderfier(this.map,{keepSpiderfied:!0});
for(a=0;a<=this.markers.length-1;a++)this.oms.addMarker(this.markers[a]);if(this.bounds.getNorthEast().equals(this.bounds.getSouthWest())){a=new google.maps.LatLng(this.bounds.getNorthEast().lat()+.01,this.bounds.getNorthEast().lng()+.01);var c=new google.maps.LatLng(this.bounds.getNorthEast().lat()-.01,this.bounds.getNorthEast().lng()-.01);this.bounds.extend(a);this.bounds.extend(c)}"default"!==this.options.center&&(this.map.fitBounds(this.bounds),this.map.panToBounds(this.bounds))}});XF.Element.register("xtMembermap",
"XF.xtMembermap")}(jQuery,window,document);
!function(t,o,n,e){"use strict";XF.xtMembermap=XF.Event.newHandler({eventNameSpace:"xtMembermap",options:{container:null,mapurl:null,maptype:null,mapid:null,latitude:null,longitude:null,zoom:null,poi:1,cluster:1,clusterPath:null,maxZoom:null,minClusterSize:null},load:null,container:null,dimensions:null,markers:null,mapData:null,markerCluster:null,map:null,bounds:null,infoWindow:null,userDataUrl:null,init:function(){!0!==this.load&&(this.load=!0,this.bounds=new google.maps.LatLngBounds,this.infoWindow=new google.maps.InfoWindow({maxWidth:450}),this.xhr=XF.ajax("post",this.options.mapurl,{},XF.proxy(this,"onLoad"))),this.markers=[]},onLoad:function(t){t.mapData&&(this.mapData=t.mapData,this.initMap())},addMarker:function(t,o){var n=new google.maps.Marker({position:t.coords,map:this.map,title:t.title,icon:t.iconUrl});if(t.coords)var e=new google.maps.LatLng(t.coords);else e=new google.maps.LatLng(this.options.latitude,this.options.longitude);this.bounds.extend(e);var i=this;!function(t,o){google.maps.event.addListener(t,"click",function(n){XF.ajax("post",o.infoUrl,{},function(o){i.map.panTo(t.getPosition()),i.infoWindow.setContent(o.html.content),i.infoWindow.open(i.map,t)})})}(n,t),this.markers.push(n)},initMap:function(){var o={zoom:this.options.zoom,center:{lat:this.options.latitude,lng:this.options.longitude},mapId:this.options.mapid,mapTypeId:this.options.maptype,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,mapTypeIds:["roadmap","terrain","hybrid","satellite"]}};this.map=new google.maps.Map(n.getElementById("membermap"),o);var e=this;if(!this.options.poi){this.map.setOptions({styles:[{featureType:"poi",stylers:[{visibility:"off"}]}]})}if(t.each(this.mapData,function(t){e.addMarker(this,t)}),this.options.cluster&&(this.markerCluster=new MarkerClusterer(this.map,this.markers,{averageCenter:!0,maxZoom:e.options.maxZoom,minimumClusterSize:e.options.minClusterSize,imagePath:e.options.clusterPath+"/m"})),this.bounds.getNorthEast().equals(this.bounds.getSouthWest())){var i=new google.maps.LatLng(this.bounds.getNorthEast().lat()+.01,this.bounds.getNorthEast().lng()+.01),s=new google.maps.LatLng(this.bounds.getNorthEast().lat()-.01,this.bounds.getNorthEast().lng()-.01);this.bounds.extend(i),this.bounds.extend(s)}this.map.fitBounds(this.bounds),this.map.panToBounds(this.bounds)}}),XF.Element.register("xtMembermap","XF.xtMembermap")}(jQuery,window,document);